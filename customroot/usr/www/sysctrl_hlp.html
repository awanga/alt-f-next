<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head profile="http://www.w3.org/2005/10/profile">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="icon" type="image/png" href="dns-323.png">
<title>System Control Help</title>
</head><body>

<center><h2>Temperature, Fan and Buttons Setup Help</h2></center>

<p> In the <strong>Temperature, Fan and Buttons Setup</strong> you can
configure several items that enables you to keep your box cool and not
too noisy.

<p> In the <strong>System Temperature / Fan Speed relationship</strong> section, you
establish how fast the fan turns, depending on the current system temperature.<br>

<ul>
By checking the <strong>Use also Disks Temp.</strong> checkbox and activating the user <strong>hddtemp</strong> service, disks temperatures will also be taken into account for the fan speed. Notice that while the hddtemp service is running the disks will not be able to spin down.<br>

<li><h4>DNS-323 rev-A1/B1 hardware boards:</h4>

<p>For the A1 and B1 hardware boards, the fan speed can
vary continuously between 2000 and 6500 RPM.

<p>To calibrate the fan speed with the system temperature, you must specify
a <strong>Low</strong> and a <strong>High</strong> reference point.<br>

The <strong>Low Fan Speed</strong> entry specify the desired fan speed when the
system is at the <strong>Low Temp</strong> temperature, while
the <strong>High Fan Speed</strong> entry specify the the desired fan speed when the
system is at the <strong>High Temp</strong> temperature. For intermediate temperatures intermediate fan speeds will be used.<br>

The low and high temperatures are not the maximum and minimum values
that you which for you box, are only reference points.

For example, with the default settings, the fan speed is 300RPM for each Celsius degree  (5000 - 2000) / (50 - 40).
If the system temperature is 42 degrees, the fan will rotate at 2600 RPM (2000 + 2x300).

<p>In the <strong>Maximum ratings</strong>, in the <strong>Fan Off
Temp</strong> entry, you can specify at what temperature  should the fan
stop.

<p>In the <strong>Temp hysteresis</strong> entry you specify the temperature windows around the
Fan Off Temp change point. E.g., if the current temperature is 42, and the fan is
running, the Fan Off Temp value is 40 and the Temp hysteresis is 1, the fan will only
stop turning when the current temperature drops to 39 (Fan Off Temp - Temp hysteresis);
then, as the system temperature starts raising, the fan will only start turning slow again
when the system temperature reaches 41 (Fan Off Temp + Temp hysteresis).

<p>In the <strong>Max Fan Speed</strong>, you specify the maximum fan speed
that the fan must turn at. The value depends on the characteristics of
the fan, and the manufacturer specifies between 6000 and 7000 RPM. You
should not exceed this value.
</li>

<li><h4>DNS-323 rev-C1, DNS-320/320L/321/325/327L rev-Ax hardware boards:</h4>

<p>The fan on these box models can only have three fan settings: off, low speed and fast speed.

<p>In <strong>Fan Mode</strong> you can select how the fan will be controlled: in the
Auto mode, the fan speed will be controlled by the current system temperature and
the "Low Temp" and the "Fan Off Temp" values explained bellow tell at speed the fan will
turn. The Always mode are self-explanatory.

<p>In the <strong>Fan Off Temp</strong> entry, you can specify at what temperature
should the fan stop.

<p>In the <strong>Low Temp</strong> entry you specify the threshold temperature
between the low and fast fan speed: at lower temperatures the fan turns at low
speed, while at higher temperatures it turns at the fast speed.

<p>In the <strong>Temp hysteresis</strong> entry you specify the temperature windows around the
Fan Off Temp and the Low Temp change points. E.g., if the current temperature is 42, the fan is
running at slow speed, the Low Temp value is 40 and the Temp hysteresis is 1, the fan will only
stop turning when the current temperature drops to 39 (Low Temp - Temp hysteresis); then, as the
system temperature starts raising, the fan will only start turning slow again when the system
temperature reaches 41 (Low Temp + Temp hysteresis). The same happens around the Low Temp.  

</li>
</ul>

<p> In the <strong>System Safety</strong> section, you can specify the warning and
critical temperature limits of the box, as well as the full path name
of a script that you wrote and that must be executed when the box
temperature attains those limits.<br>

The default command to execute when the <strong>Critical Temperature
</strong> limit is attained, "/usr/sbin/poweroff", makes the box shut
down.<br>

If you check the <strong>Send email</strong> checkbox, an email will be
sent when any of the temperatures limits are exceeded. The email will be
sent only once; no email will be sent if the temperature drops below
the setpoints.</p>

<p> In the <strong>Action to execute on Button press</strong> section, you can
specify the full path name of scripts that you wrote and that must be
executed when your press the box buttons.

<ul>
	<li><strong>Front Power button</strong>:
	The  <strong>DNS320L/327L</strong> front power button can only be used to power
	off the box. For the other boxes:
	
<ol>
	<li>Three seconds after you start pressing the box front button, the
	right LED starts flashing,  and if you release the button the box will
	do a controlled shutdown, but first will execute the script that you
	specified in the <strong>Front button 1st cmd entry</strong>.</li>

	<li>If you keep pressing the button, the left LED will start flashing,
	and if you then release the button the box will do a controlled
	reboot, but first will execute  the script that you specified in the
	<strong>Front button 2nd cmd entry</strong>.</li>

	<li>If you keep pressing the button, both LEDs will stop flashing and if
	you then release the button no action will be taken.</li>
</ol>
</li>

	<li><strong>USB/Reset button</strong>:
	The <strong>DNS320, DNS320L, DNS325, DNS-327L</strong>, in addition to the back or
	bottom recessed Reset button also have a front or back USB button,
	but currently both perform the same functionality.

<ul>
	<li>If you press the Reset/USB buttons for one or two seconds,
	both LEDs will start flashing, and the script that you specified in the
	<strong>Back button cmd</strong> will be executed.<br>
	If no script is specified all USB mounted filesystems will be unmounted,
	making it safe to remove the attached USB device. Notice that unmounting
	will be unsuccessful if any service is accessing the USB filesystems.</li>

	<li>The Reset/USB button also has two <em>recovery actions</em> if the
	<strong>Enable Recovery</strong> checkbox is checked:
	<ul>
		<li>If you keep it pressed for more than ten seconds, you
		can telnet the box at port 26, as root and without password. This is a
		safeguard in case you forget the password.</li>

		<li>As a last safeguard, if you press it for more that
		twenty seconds, all the settings saved in flash will be erased, and the
		box will do a controlled reboot. This is a last resort safeguard, in
		case you mess the box configuration so much that you can't do anything
		with it; after the reboot the box will behave as if no settings has
		ever been saved, and you have to struggle to find its IP address
		(if you have a DHCP server enabled in your network, the box will use it).</li>
	</ul>
	</li>
</ul>
</li>

</ul>

<br><button type=button onclick="history.back()">Back</button></body>
</html>
